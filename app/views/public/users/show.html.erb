<div class="row">

  <%= render "public/shared/user_info", user: @user, link_to_user: false, editable: (@user == current_user && @user.email != "guest@example.com"), title: 'User info' %>

  <!-- 投稿一覧 -->
  <div class="col-md-9">
    <h3 class="mt-3">
      <% if @user == current_user %>
        自分の実装機能一覧
      <% else %>
        <%= @user.name %>さんの実装した機能一覧
      <% end %>
    </h3>
    <div class="d-flex justify-content-between align-items-center mt-3" style="max-width: 90%;">
      <h5>
        <% if @user == current_user %>
          <%= link_to "お気に入り記事一覧へ", favorite_posts_path(current_user) %>
        <% else %>
          <%= link_to "お気に入り記事一覧へ", favorite_posts_path(@user) %>
        <% end %>
      </h5>
      <%= form_with url: request.path, method: :get, local: true, class: "d-flex align-items-center" do |f| %>
        <div class="form-group mb-0 mr-2">
          <!-- 並べ替えラベルとセレクト -->
          <%= f.label :sort, "並び替え", class: "form-label me-2" %>
          <%= f.select :sort, options_for_select([["新しい順"], ["いいね数順"], ["コメント数順"]], params[:sort]), class: "form-select" %>
        </div>
        <!-- 並べ替えボタン -->
        <div class="mb-2">
          <%= f.submit "並べ替える", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
    <%= render "public/shared/posts_index", posts: @posts, show_username: false, show_buttons: @user == current_user %>
  </div>
</div>
